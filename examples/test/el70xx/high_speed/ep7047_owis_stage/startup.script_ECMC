# ecmc test system
# Anders Sandstr√∂m

require ecmccfg "EC_RATE=500"


# Configure hardware
${SCRIPTEXEC} ${ecmccfg_DIR}configureSlave.cmd, "SLAVE_ID=12, HW_DESC=EP7047-1032, CONFIG=-Motor-Micos-Epics-Training"

# Configure Motion
epicsEnvSet("DEV",      "$(IOC)")
epicsEnvSet("DRIVE_ID", "$(ECMC_EC_SLAVE_NUM)")
#$(SCRIPTEXEC) ($(ecmccfg_DIR)configureAxis.cmd, CONFIG=./cfg/linear.ax, CFG_MACROS="DRIVE_ID=${ECMC_EC_SLAVE_NUM}")
$(SCRIPTEXEC) ($(ecmccfg_DIR)configureAxis.cmd, CONFIG=./cfg/linear.ax)

dbLoadTemplate(ho.subs,"P=${IOC}:,PORT=${ECMC_ASYN_PORT},AXIS_NAME=${ECMC_MOTOR_NAME},AXIS_NO=${ECMC_AXIS_NO}")
